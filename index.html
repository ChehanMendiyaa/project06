<script>
    <!-- code by @chehanmendiya// -->
    document.write(unescape('%0A%3C%21DOCTYPE%20html%3E%0A%3Chtml%3E%0A%3Chead%3E%0A%09%3Ctitle%3EProgect%2006%20-%20By%20Chehan%3C/title%3E%0A%09%3Clink%20rel%3D%22stylesheet%22%20type%3D%22text/css%22%20href%3D%22https%3A//fonts.googleapis.com/css%3Ffamily%3DPermanent+Marker%22%3E%0A%09%3Cstyle%20type%3D%22text/css%22%3E%0A%09%09body%20%7B%0A%09%09%09background-color%3A%20black%3B%0A%09%09%7D%0A%0A%09%09%23pacman%20%7B%0A%09%09%09height%3A%20470px%3B%0A%09%09%09width%3A%20382px%3B%0A%09%09%09border-radius%3A%205px%3B%0A%09%09%09margin%3A%2020px%20auto%3B%0A%09%09%7D%0A%0A%09%09%23shim%20%7B%0A%09%09%09font-family%3A%20%27Permanent%20Marker%27%2C%20cursive%3B%0A%09%09%09position%3A%20absolute%3B%0A%09%09%09visibility%3A%20hidden%0A%09%09%7D%0A%0A%09%09h1%20%7B%0A%09%09%09font-family%3A%20%27Permanent%20Marker%27%2C%20cursive%3B%0A%09%09%09text-align%3A%20center%3B%0A%09%09%09color%3A%20yellow%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20margin-bottom%3A%200px%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20font-weight%3A%20bold%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20text-decoration%3Awavy%3B%0A%09%09%7D%0A%0A%09%09body%20%7B%0A%09%09%09width%3A%20342px%3B%0A%09%09%09margin%3A%200px%20auto%3B%0A%09%09%09font-family%3A%20sans-serif%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%09%09%7D%0A%0A%09%09p%20%7B%0A%09%09%09text-decoration%3A%20none%3B%0A%09%09%09color%3A%20%230000FF%3B%0A%09%09%7D%0A%09%3C/style%3E%0A%3C/head%3E%0A%3Cbody%3E%0A%09%3Cdiv%20id%3D%22shim%22%3Eshim%20for%20font%20face%3C/div%3E%0A%09%3Ch1%3E%u0DAF%u0DD4%u0DC0%u0DB8%u0DD4%20%u0DAF%u0DD4%u0DC0%u0DB8%u0DD4%20%uD83D%uDE02%uD83D%uDE05%uD83D%uDE04%3C/h1%3E%0A%09%3Cmarquee%3E%3Cp%20style%3D%22text-align%3Acenter%3B%20color%3A%20aliceblue%3B%20font-style%3A%20oblique%3B%20margin-top%3A15px%3B%22%3EWhat%20feels%20like%20the%20end%2C%20is%20often%20just%20the%20beginning.%u2755%3C/p%3E%3C/marquee%3E%0A%09%3Cdiv%20id%3D%22pacman%22%3E%3C/div%3E%0A%20%20%20%20%3CP%20style%3D%22color%3A%20aliceblue%3B%20text-align%3A%20right%3B%20font-style%3A%20oblique%3B%20font-weight%3A%20bold%3B%22%3Econtact%20*_*-%20chehanmendiya@gmail.com%3C/P%3E%0A%0A%09%3Cscript%20type%3D%22text/javascript%22%20src%3D%22https%3A//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20type%3D%22text/javascript%22%20src%3D%22https%3A//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js%22%3E%3C/script%3E%0A%09%3Cscript%20type%3D%22text/javascript%22%3E%0A%0A%0Avar%20NONE%20%20%20%20%20%20%20%20%3D%204%2C%0A%20%20%20%20UP%20%20%20%20%20%20%20%20%20%20%3D%203%2C%0A%20%20%20%20LEFT%20%20%20%20%20%20%20%20%3D%202%2C%0A%20%20%20%20DOWN%20%20%20%20%20%20%20%20%3D%201%2C%0A%20%20%20%20RIGHT%20%20%20%20%20%20%20%3D%2011%2C%0A%20%20%20%20WAITING%20%20%20%20%20%3D%205%2C%0A%20%20%20%20PAUSE%20%20%20%20%20%20%20%3D%206%2C%0A%20%20%20%20PLAYING%20%20%20%20%20%3D%207%2C%0A%20%20%20%20COUNTDOWN%20%20%20%3D%208%2C%0A%20%20%20%20EATEN_PAUSE%20%3D%209%2C%0A%20%20%20%20DYING%20%20%20%20%20%20%20%3D%2010%2C%0A%20%20%20%20Pacman%20%20%20%20%20%20%3D%20%7B%7D%3B%0A%0APacman.FPS%20%3D%2030%3B%0A%0APacman.Ghost%20%3D%20function%20%28game%2C%20map%2C%20colour%29%20%7B%0A%0A%20%20%20%20var%20position%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20direction%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20eatable%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20eaten%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20due%20%20%20%20%20%20%20%3D%20null%3B%0A%20%20%20%20%0A%20%20%20%20function%20getNewCoord%28dir%2C%20current%29%20%7B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20speed%20%20%3D%20isVunerable%28%29%20%3F%201%20%3A%20isHidden%28%29%20%3F%204%20%3A%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20xSpeed%20%3D%20%28dir%20%3D%3D%3D%20LEFT%20%26%26%20-speed%20%7C%7C%20dir%20%3D%3D%3D%20RIGHT%20%26%26%20speed%20%7C%7C%200%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20ySpeed%20%3D%20%28dir%20%3D%3D%3D%20DOWN%20%26%26%20speed%20%7C%7C%20dir%20%3D%3D%3D%20UP%20%26%26%20-speed%20%7C%7C%200%29%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20addBounded%28current.x%2C%20xSpeed%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20addBounded%28current.y%2C%20ySpeed%29%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20/*%20Collision%20detection%28walls%29%20is%20done%20when%20a%20ghost%20lands%20on%20an%0A%20%20%20%20%20*%20exact%20block%2C%20make%20sure%20they%20dont%20skip%20over%20it%20%0A%20%20%20%20%20*/%0A%20%20%20%20function%20addBounded%28x1%2C%20x2%29%20%7B%20%0A%20%20%20%20%20%20%20%20var%20rem%20%20%20%20%3D%20x1%20%25%2010%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20result%20%3D%20rem%20+%20x2%3B%0A%20%20%20%20%20%20%20%20if%20%28rem%20%21%3D%3D%200%20%26%26%20result%20%3E%2010%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x1%20+%20%2810%20-%20rem%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%28rem%20%3E%200%20%26%26%20result%20%3C%200%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x1%20-%20rem%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20x1%20+%20x2%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20isVunerable%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20return%20eatable%20%21%3D%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20isDangerous%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20eaten%20%3D%3D%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20isHidden%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20return%20eatable%20%3D%3D%3D%20null%20%26%26%20eaten%20%21%3D%3D%20null%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20getRandomDirection%28%29%20%7B%0A%20%20%20%20%20%20%20%20var%20moves%20%3D%20%28direction%20%3D%3D%3D%20LEFT%20%7C%7C%20direction%20%3D%3D%3D%20RIGHT%29%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%3F%20%5BUP%2C%20DOWN%5D%20%3A%20%5BLEFT%2C%20RIGHT%5D%3B%0A%20%20%20%20%20%20%20%20return%20moves%5BMath.floor%28Math.random%28%29%20*%202%29%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20reset%28%29%20%7B%0A%20%20%20%20%20%20%20%20eaten%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20eatable%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20position%20%3D%20%7B%22x%22%3A%2090%2C%20%22y%22%3A%2080%7D%3B%0A%20%20%20%20%20%20%20%20direction%20%3D%20getRandomDirection%28%29%3B%0A%20%20%20%20%20%20%20%20due%20%3D%20getRandomDirection%28%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20onWholeSquare%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x%20%25%2010%20%3D%3D%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20oppositeDirection%28dir%29%20%7B%20%0A%20%20%20%20%20%20%20%20return%20dir%20%3D%3D%3D%20LEFT%20%26%26%20RIGHT%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20dir%20%3D%3D%3D%20RIGHT%20%26%26%20LEFT%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20dir%20%3D%3D%3D%20UP%20%26%26%20DOWN%20%7C%7C%20UP%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20makeEatable%28%29%20%7B%0A%20%20%20%20%20%20%20%20direction%20%3D%20oppositeDirection%28direction%29%3B%0A%20%20%20%20%20%20%20%20eatable%20%3D%20game.getTick%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20eat%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20eatable%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20eaten%20%3D%20game.getTick%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20pointToCoord%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.round%28x%20/%2010%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20nextSquare%28x%2C%20dir%29%20%7B%0A%20%20%20%20%20%20%20%20var%20rem%20%3D%20x%20%25%2010%3B%0A%20%20%20%20%20%20%20%20if%20%28rem%20%3D%3D%3D%200%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%3B%20%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28dir%20%3D%3D%3D%20RIGHT%20%7C%7C%20dir%20%3D%3D%3D%20DOWN%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%20+%20%2810%20-%20rem%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%20-%20rem%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20onGridSquare%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20return%20onWholeSquare%28pos.y%29%20%26%26%20onWholeSquare%28pos.x%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20secondsAgo%28tick%29%20%7B%20%0A%20%20%20%20%20%20%20%20return%20%28game.getTick%28%29%20-%20tick%29%20/%20Pacman.FPS%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20getColour%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20if%20%28eatable%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28secondsAgo%28eatable%29%20%3E%205%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20game.getTick%28%29%20%25%2020%20%3E%2010%20%3F%20%22%23FFFFFF%22%20%3A%20%22%230000BB%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%230000BB%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%28eaten%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%22%23222%22%3B%0A%20%20%20%20%20%20%20%20%7D%20%0A%20%20%20%20%20%20%20%20return%20colour%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20draw%28ctx%29%20%7B%0A%20%20%0A%20%20%20%20%20%20%20%20var%20s%20%20%20%20%3D%20map.blockSize%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20top%20%20%3D%20%28position.y/10%29%20*%20s%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20left%20%3D%20%28position.x/10%29%20*%20s%3B%0A%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28eatable%20%26%26%20secondsAgo%28eatable%29%20%3E%208%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20eatable%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28eaten%20%26%26%20secondsAgo%28eaten%29%20%3E%203%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20eaten%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20tl%20%3D%20left%20+%20s%3B%0A%20%20%20%20%20%20%20%20var%20base%20%3D%20top%20+%20s%20-%203%3B%0A%20%20%20%20%20%20%20%20var%20inc%20%3D%20s%20/%2010%3B%0A%0A%20%20%20%20%20%20%20%20var%20high%20%3D%20game.getTick%28%29%20%25%2010%20%3E%205%20%3F%203%20%20%3A%20-3%3B%0A%20%20%20%20%20%20%20%20var%20low%20%20%3D%20game.getTick%28%29%20%25%2010%20%3E%205%20%3F%20-3%20%3A%203%3B%0A%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20getColour%28%29%3B%0A%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20ctx.moveTo%28left%2C%20base%29%3B%0A%0A%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28left%2C%20top%2C%20left%20+%20%28s/2%29%2C%20%20top%29%3B%0A%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28left%20+%20s%2C%20top%2C%20left+s%2C%20%20base%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20//%20Wavy%20things%20at%20the%20bottom%0A%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28tl-%28inc*1%29%2C%20base+high%2C%20tl%20-%20%28inc%20*%202%29%2C%20%20base%29%3B%0A%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28tl-%28inc*3%29%2C%20base+low%2C%20tl%20-%20%28inc%20*%204%29%2C%20%20base%29%3B%0A%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28tl-%28inc*5%29%2C%20base+high%2C%20tl%20-%20%28inc%20*%206%29%2C%20%20base%29%3B%0A%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28tl-%28inc*7%29%2C%20base+low%2C%20tl%20-%20%28inc%20*%208%29%2C%20%20base%29%3B%20%0A%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28tl-%28inc*9%29%2C%20base+high%2C%20tl%20-%20%28inc%20*%2010%29%2C%20base%29%3B%20%0A%0A%20%20%20%20%20%20%20%20ctx.closePath%28%29%3B%0A%20%20%20%20%20%20%20%20ctx.fill%28%29%3B%0A%0A%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFF%22%3B%0A%20%20%20%20%20%20%20%20ctx.arc%28left%20+%206%2Ctop%20+%206%2C%20s%20/%206%2C%200%2C%20300%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20ctx.arc%28%28left%20+%20s%29%20-%206%2Ctop%20+%206%2C%20s%20/%206%2C%200%2C%20300%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20ctx.closePath%28%29%3B%0A%20%20%20%20%20%20%20%20ctx.fill%28%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20f%20%3D%20s%20/%2012%3B%0A%20%20%20%20%20%20%20%20var%20off%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20off%5BRIGHT%5D%20%3D%20%5Bf%2C%200%5D%3B%0A%20%20%20%20%20%20%20%20off%5BLEFT%5D%20%20%3D%20%5B-f%2C%200%5D%3B%0A%20%20%20%20%20%20%20%20off%5BUP%5D%20%20%20%20%3D%20%5B0%2C%20-f%5D%3B%0A%20%20%20%20%20%20%20%20off%5BDOWN%5D%20%20%3D%20%5B0%2C%20f%5D%3B%0A%0A%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23000%22%3B%0A%20%20%20%20%20%20%20%20ctx.arc%28left+6+off%5Bdirection%5D%5B0%5D%2C%20top+6+off%5Bdirection%5D%5B1%5D%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20/%2015%2C%200%2C%20300%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20ctx.arc%28%28left+s%29-6+off%5Bdirection%5D%5B0%5D%2C%20top+6+off%5Bdirection%5D%5B1%5D%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20/%2015%2C%200%2C%20300%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20ctx.closePath%28%29%3B%0A%20%20%20%20%20%20%20%20ctx.fill%28%29%3B%0A%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20pane%28pos%29%20%7B%0A%0A%20%20%20%20%20%20%20%20if%20%28pos.y%20%3D%3D%3D%20100%20%26%26%20pos.x%20%3E%3D%20190%20%26%26%20direction%20%3D%3D%3D%20RIGHT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%22y%22%3A%20100%2C%20%22x%22%3A%20-10%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28pos.y%20%3D%3D%3D%20100%20%26%26%20pos.x%20%3C%3D%20-10%20%26%26%20direction%20%3D%3D%3D%20LEFT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20position%20%3D%20%7B%22y%22%3A%20100%2C%20%22x%22%3A%20190%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20move%28ctx%29%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20oldPos%20%3D%20position%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20onGrid%20%3D%20onGridSquare%28position%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20npos%20%20%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28due%20%21%3D%3D%20direction%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20getNewCoord%28due%2C%20position%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28onGrid%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.isFloorSpace%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3ApointToCoord%28nextSquare%28npos.y%2C%20due%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3ApointToCoord%28nextSquare%28npos.x%2C%20due%29%29%7D%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20direction%20%3D%20due%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28npos%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20getNewCoord%28direction%2C%20position%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28onGrid%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20map.isWallSpace%28%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%20%3A%20pointToCoord%28nextSquare%28npos.y%2C%20direction%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%20%3A%20pointToCoord%28nextSquare%28npos.x%2C%20direction%29%29%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20due%20%3D%20getRandomDirection%28%29%3B%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20move%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20position%20%3D%20npos%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20tmp%20%3D%20pane%28position%29%3B%0A%20%20%20%20%20%20%20%20if%20%28tmp%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20position%20%3D%20tmp%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20due%20%3D%20getRandomDirection%28%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22new%22%20%3A%20position%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22old%22%20%3A%20oldPos%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%22eat%22%20%20%20%20%20%20%20%20%20%3A%20eat%2C%0A%20%20%20%20%20%20%20%20%22isVunerable%22%20%3A%20isVunerable%2C%0A%20%20%20%20%20%20%20%20%22isDangerous%22%20%3A%20isDangerous%2C%0A%20%20%20%20%20%20%20%20%22makeEatable%22%20%3A%20makeEatable%2C%0A%20%20%20%20%20%20%20%20%22reset%22%20%20%20%20%20%20%20%3A%20reset%2C%0A%20%20%20%20%20%20%20%20%22move%22%20%20%20%20%20%20%20%20%3A%20move%2C%0A%20%20%20%20%20%20%20%20%22draw%22%20%20%20%20%20%20%20%20%3A%20draw%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0APacman.User%20%3D%20function%20%28game%2C%20map%29%20%7B%0A%20%20%20%20%0A%20%20%20%20var%20position%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20direction%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20eaten%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20due%20%20%20%20%20%20%20%3D%20null%2C%20%0A%20%20%20%20%20%20%20%20lives%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20score%20%20%20%20%20%3D%205%2C%0A%20%20%20%20%20%20%20%20keyMap%20%20%20%20%3D%20%7B%7D%3B%0A%20%20%20%20%0A%20%20%20%20keyMap%5BKEY.ARROW_LEFT%5D%20%20%3D%20LEFT%3B%0A%20%20%20%20keyMap%5BKEY.ARROW_UP%5D%20%20%20%20%3D%20UP%3B%0A%20%20%20%20keyMap%5BKEY.ARROW_RIGHT%5D%20%3D%20RIGHT%3B%0A%20%20%20%20keyMap%5BKEY.ARROW_DOWN%5D%20%20%3D%20DOWN%3B%0A%0A%20%20%20%20function%20addScore%28nScore%29%20%7B%20%0A%20%20%20%20%20%20%20%20score%20+%3D%20nScore%3B%0A%20%20%20%20%20%20%20%20if%20%28score%20%3E%3D%2010000%20%26%26%20score%20-%20nScore%20%3C%2010000%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20lives%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20theScore%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20return%20score%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20loseLife%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20lives%20-%3D%201%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20getLives%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20lives%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20initUser%28%29%20%7B%0A%20%20%20%20%20%20%20%20score%20%3D%200%3B%0A%20%20%20%20%20%20%20%20lives%20%3D%203%3B%0A%20%20%20%20%20%20%20%20newLevel%28%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20function%20newLevel%28%29%20%7B%0A%20%20%20%20%20%20%20%20resetPosition%28%29%3B%0A%20%20%20%20%20%20%20%20eaten%20%3D%200%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20resetPosition%28%29%20%7B%0A%20%20%20%20%20%20%20%20position%20%3D%20%7B%22x%22%3A%2090%2C%20%22y%22%3A%20120%7D%3B%0A%20%20%20%20%20%20%20%20direction%20%3D%20LEFT%3B%0A%20%20%20%20%20%20%20%20due%20%3D%20LEFT%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20reset%28%29%20%7B%0A%20%20%20%20%20%20%20%20initUser%28%29%3B%0A%20%20%20%20%20%20%20%20resetPosition%28%29%3B%0A%20%20%20%20%7D%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%0A%20%20%20%20function%20keyDown%28e%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28typeof%20keyMap%5Be.keyCode%5D%20%21%3D%3D%20%22undefined%22%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20due%20%3D%20keyMap%5Be.keyCode%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20e.preventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20e.stopPropagation%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%09%7D%3B%0A%0A%20%20%20%20function%20getNewCoord%28dir%2C%20current%29%20%7B%20%20%20%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%3A%20current.x%20+%20%28dir%20%3D%3D%3D%20LEFT%20%26%26%20-2%20%7C%7C%20dir%20%3D%3D%3D%20RIGHT%20%26%26%202%20%7C%7C%200%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%3A%20current.y%20+%20%28dir%20%3D%3D%3D%20DOWN%20%26%26%202%20%7C%7C%20dir%20%3D%3D%3D%20UP%20%20%20%20%26%26%20-2%20%7C%7C%200%29%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20onWholeSquare%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20x%20%25%2010%20%3D%3D%3D%200%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20pointToCoord%28x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20Math.round%28x/10%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20nextSquare%28x%2C%20dir%29%20%7B%0A%20%20%20%20%20%20%20%20var%20rem%20%3D%20x%20%25%2010%3B%0A%20%20%20%20%20%20%20%20if%20%28rem%20%3D%3D%3D%200%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%3B%20%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28dir%20%3D%3D%3D%20RIGHT%20%7C%7C%20dir%20%3D%3D%3D%20DOWN%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%20+%20%2810%20-%20rem%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20x%20-%20rem%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20next%28pos%2C%20dir%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22y%22%20%3A%20pointToCoord%28nextSquare%28pos.y%2C%20dir%29%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22x%22%20%3A%20pointToCoord%28nextSquare%28pos.x%2C%20dir%29%29%2C%0A%20%20%20%20%20%20%20%20%7D%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20onGridSquare%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20return%20onWholeSquare%28pos.y%29%20%26%26%20onWholeSquare%28pos.x%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20isOnSamePlane%28due%2C%20dir%29%20%7B%20%0A%20%20%20%20%20%20%20%20return%20%28%28due%20%3D%3D%3D%20LEFT%20%7C%7C%20due%20%3D%3D%3D%20RIGHT%29%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28dir%20%3D%3D%3D%20LEFT%20%7C%7C%20dir%20%3D%3D%3D%20RIGHT%29%29%20%7C%7C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%28%28due%20%3D%3D%3D%20UP%20%7C%7C%20due%20%3D%3D%3D%20DOWN%29%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%28dir%20%3D%3D%3D%20UP%20%7C%7C%20dir%20%3D%3D%3D%20DOWN%29%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20move%28ctx%29%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20npos%20%20%20%20%20%20%20%20%3D%20null%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20nextWhole%20%20%20%3D%20null%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20oldPosition%20%3D%20position%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20block%20%20%20%20%20%20%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28due%20%21%3D%3D%20direction%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20getNewCoord%28due%2C%20position%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28isOnSamePlane%28due%2C%20direction%29%20%7C%7C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28onGridSquare%28position%29%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.isFloorSpace%28next%28npos%2C%20due%29%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20direction%20%3D%20due%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20null%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28npos%20%3D%3D%3D%20null%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20getNewCoord%28direction%2C%20position%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28onGridSquare%28position%29%20%26%26%20map.isWallSpace%28next%28npos%2C%20direction%29%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20direction%20%3D%20NONE%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20if%20%28direction%20%3D%3D%3D%20NONE%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%22new%22%20%3A%20position%2C%20%22old%22%20%3A%20position%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28npos.y%20%3D%3D%3D%20100%20%26%26%20npos.x%20%3E%3D%20190%20%26%26%20direction%20%3D%3D%3D%20RIGHT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20%7B%22y%22%3A%20100%2C%20%22x%22%3A%20-10%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28npos.y%20%3D%3D%3D%20100%20%26%26%20npos.x%20%3C%3D%20-12%20%26%26%20direction%20%3D%3D%3D%20LEFT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20npos%20%3D%20%7B%22y%22%3A%20100%2C%20%22x%22%3A%20190%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20position%20%3D%20npos%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20nextWhole%20%3D%20next%28position%2C%20direction%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20block%20%3D%20map.block%28nextWhole%29%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28%28isMidSquare%28position.y%29%20%7C%7C%20isMidSquare%28position.x%29%29%20%26%26%0A%20%20%20%20%20%20%20%20%20%20%20%20block%20%3D%3D%3D%20Pacman.BISCUIT%20%7C%7C%20block%20%3D%3D%3D%20Pacman.PILL%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20map.setBlock%28nextWhole%2C%20Pacman.EMPTY%29%3B%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20addScore%28%28block%20%3D%3D%3D%20Pacman.BISCUIT%29%20%3F%2010%20%3A%2050%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20eaten%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28eaten%20%3D%3D%3D%20182%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20game.completedLevel%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28block%20%3D%3D%3D%20Pacman.PILL%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20game.eatenPill%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%22new%22%20%3A%20position%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%22old%22%20%3A%20oldPosition%0A%20%20%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20isMidSquare%28x%29%20%7B%20%0A%20%20%20%20%20%20%20%20var%20rem%20%3D%20x%20%25%2010%3B%0A%20%20%20%20%20%20%20%20return%20rem%20%3E%203%20%7C%7C%20rem%20%3C%207%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20calcAngle%28dir%2C%20pos%29%20%7B%20%0A%20%20%20%20%20%20%20%20if%20%28dir%20%3D%3D%20RIGHT%20%26%26%20%28pos.x%20%25%2010%20%3C%205%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%22start%22%3A0.25%2C%20%22end%22%3A1.75%2C%20%22direction%22%3A%20false%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28dir%20%3D%3D%3D%20DOWN%20%26%26%20%28pos.y%20%25%2010%20%3C%205%29%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%22start%22%3A0.75%2C%20%22end%22%3A2.25%2C%20%22direction%22%3A%20false%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28dir%20%3D%3D%3D%20UP%20%26%26%20%28pos.y%20%25%2010%20%3C%205%29%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%22start%22%3A1.25%2C%20%22end%22%3A1.75%2C%20%22direction%22%3A%20true%7D%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28dir%20%3D%3D%3D%20LEFT%20%26%26%20%28pos.x%20%25%2010%20%3C%205%29%29%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20%7B%22start%22%3A0.75%2C%20%22end%22%3A1.25%2C%20%22direction%22%3A%20true%7D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20%7B%22start%22%3A0%2C%20%22end%22%3A2%2C%20%22direction%22%3A%20false%7D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20drawDead%28ctx%2C%20amount%29%20%7B%20%0A%0A%20%20%20%20%20%20%20%20var%20size%20%3D%20map.blockSize%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20half%20%3D%20size%20/%202%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28amount%20%3E%3D%201%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFFF00%22%3B%0A%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.moveTo%28%28%28position.x/10%29%20*%20size%29%20+%20half%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28%28position.y/10%29%20*%20size%29%20+%20half%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.arc%28%28%28position.x/10%29%20*%20size%29%20+%20half%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28%28position.y/10%29%20*%20size%29%20+%20half%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20half%2C%200%2C%20Math.PI%20*%202%20*%20amount%2C%20true%29%3B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.fill%28%29%3B%20%20%20%20%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20draw%28ctx%29%20%7B%20%0A%0A%20%20%20%20%20%20%20%20var%20s%20%20%20%20%20%3D%20map.blockSize%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20angle%20%3D%20calcAngle%28direction%2C%20position%29%3B%0A%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFFF00%22%3B%0A%0A%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20%20%20%20%20ctx.moveTo%28%28%28position.x/10%29%20*%20s%29%20+%20s%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28%28position.y/10%29%20*%20s%29%20+%20s%20/%202%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.arc%28%28%28position.x/10%29%20*%20s%29%20+%20s%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28%28position.y/10%29%20*%20s%29%20+%20s%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20s%20/%202%2C%20Math.PI%20*%20angle.start%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.PI%20*%20angle.end%2C%20angle.direction%29%3B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.fill%28%29%3B%20%20%20%20%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20initUser%28%29%3B%0A%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%22draw%22%20%20%20%20%20%20%20%20%20%20%3A%20draw%2C%0A%20%20%20%20%20%20%20%20%22drawDead%22%20%20%20%20%20%20%3A%20drawDead%2C%0A%20%20%20%20%20%20%20%20%22loseLife%22%20%20%20%20%20%20%3A%20loseLife%2C%0A%20%20%20%20%20%20%20%20%22getLives%22%20%20%20%20%20%20%3A%20getLives%2C%0A%20%20%20%20%20%20%20%20%22score%22%20%20%20%20%20%20%20%20%20%3A%20score%2C%0A%20%20%20%20%20%20%20%20%22addScore%22%20%20%20%20%20%20%3A%20addScore%2C%0A%20%20%20%20%20%20%20%20%22theScore%22%20%20%20%20%20%20%3A%20theScore%2C%0A%20%20%20%20%20%20%20%20%22keyDown%22%20%20%20%20%20%20%20%3A%20keyDown%2C%0A%20%20%20%20%20%20%20%20%22move%22%20%20%20%20%20%20%20%20%20%20%3A%20move%2C%0A%20%20%20%20%20%20%20%20%22newLevel%22%20%20%20%20%20%20%3A%20newLevel%2C%0A%20%20%20%20%20%20%20%20%22reset%22%20%20%20%20%20%20%20%20%20%3A%20reset%2C%0A%20%20%20%20%20%20%20%20%22resetPosition%22%20%3A%20resetPosition%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0APacman.Map%20%3D%20function%20%28size%29%20%7B%0A%20%20%20%20%0A%20%20%20%20var%20height%20%20%20%20%3D%20null%2C%20%0A%20%20%20%20%20%20%20%20width%20%20%20%20%20%3D%20null%2C%20%0A%20%20%20%20%20%20%20%20blockSize%20%3D%20size%2C%0A%20%20%20%20%20%20%20%20pillSize%20%20%3D%200%2C%0A%20%20%20%20%20%20%20%20map%20%20%20%20%20%20%20%3D%20null%3B%0A%20%20%20%20%0A%20%20%20%20function%20withinBounds%28y%2C%20x%29%20%7B%0A%20%20%20%20%20%20%20%20return%20y%20%3E%3D%200%20%26%26%20y%20%3C%20height%20%26%26%20x%20%3E%3D%200%20%26%26%20x%20%3C%20width%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20function%20isWall%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20return%20withinBounds%28pos.y%2C%20pos.x%29%20%26%26%20map%5Bpos.y%5D%5Bpos.x%5D%20%3D%3D%3D%20Pacman.WALL%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20function%20isFloorSpace%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28%21withinBounds%28pos.y%2C%20pos.x%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20var%20peice%20%3D%20map%5Bpos.y%5D%5Bpos.x%5D%3B%0A%20%20%20%20%20%20%20%20return%20peice%20%3D%3D%3D%20Pacman.EMPTY%20%7C%7C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20peice%20%3D%3D%3D%20Pacman.BISCUIT%20%7C%7C%0A%20%20%20%20%20%20%20%20%20%20%20%20peice%20%3D%3D%3D%20Pacman.PILL%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20function%20drawWall%28ctx%29%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20i%2C%20j%2C%20p%2C%20line%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.strokeStyle%20%3D%20%22%230000FF%22%3B%0A%20%20%20%20%20%20%20%20ctx.lineWidth%20%20%20%3D%205%3B%0A%20%20%20%20%20%20%20%20ctx.lineCap%20%20%20%20%20%3D%20%22round%22%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20Pacman.WALLS.length%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20line%20%3D%20Pacman.WALLS%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20line.length%3B%20j%20+%3D%201%29%20%7B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p%20%3D%20line%5Bj%5D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28p.move%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.moveTo%28p.move%5B0%5D%20*%20blockSize%2C%20p.move%5B1%5D%20*%20blockSize%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28p.line%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.lineTo%28p.line%5B0%5D%20*%20blockSize%2C%20p.line%5B1%5D%20*%20blockSize%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28p.curve%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.quadraticCurveTo%28p.curve%5B0%5D%20*%20blockSize%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.curve%5B1%5D%20*%20blockSize%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.curve%5B2%5D%20*%20blockSize%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20p.curve%5B3%5D%20*%20blockSize%29%3B%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.stroke%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20function%20reset%28%29%20%7B%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20map%20%20%20%20%3D%20Pacman.MAP.clone%28%29%3B%0A%20%20%20%20%20%20%20%20height%20%3D%20map.length%3B%0A%20%20%20%20%20%20%20%20width%20%20%3D%20map%5B0%5D.length%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20block%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20return%20map%5Bpos.y%5D%5Bpos.x%5D%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20setBlock%28pos%2C%20type%29%20%7B%0A%20%20%20%20%20%20%20%20map%5Bpos.y%5D%5Bpos.x%5D%20%3D%20type%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20drawPills%28ctx%29%20%7B%20%0A%0A%20%20%20%20%20%20%20%20if%20%28++pillSize%20%3E%2030%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20pillSize%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20height%3B%20i%20+%3D%201%29%20%7B%0A%09%09%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20width%3B%20j%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28map%5Bi%5D%5Bj%5D%20%3D%3D%3D%20Pacman.PILL%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23000%22%3B%0A%09%09%20%20%20%20%20%20%20%20%20%20%20%20ctx.fillRect%28%28j%20*%20blockSize%29%2C%20%28i%20*%20blockSize%29%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockSize%2C%20blockSize%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFF%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.arc%28%28j%20*%20blockSize%29%20+%20blockSize%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28i%20*%20blockSize%29%20+%20blockSize%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.abs%285%20-%20%28pillSize/3%29%29%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%200%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.PI%20*%202%2C%20false%29%3B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.fill%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.closePath%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%09%09%20%20%20%20%7D%0A%09%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20draw%28ctx%29%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20i%2C%20j%2C%20size%20%3D%20blockSize%3B%0A%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23000%22%3B%0A%09%20%20%20%20ctx.fillRect%280%2C%200%2C%20width%20*%20size%2C%20height%20*%20size%29%3B%0A%0A%20%20%20%20%20%20%20%20drawWall%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20height%3B%20i%20+%3D%201%29%20%7B%0A%09%09%20%20%20%20for%20%28j%20%3D%200%3B%20j%20%3C%20width%3B%20j%20+%3D%201%29%20%7B%0A%09%09%09%20%20%20%20drawBlock%28i%2C%20j%2C%20ctx%29%3B%0A%09%09%20%20%20%20%7D%0A%09%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20drawBlock%28y%2C%20x%2C%20ctx%29%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20layout%20%3D%20map%5By%5D%5Bx%5D%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28layout%20%3D%3D%3D%20Pacman.PILL%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20return%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28layout%20%3D%3D%3D%20Pacman.EMPTY%20%7C%7C%20layout%20%3D%3D%3D%20Pacman.BLOCK%20%7C%7C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20layout%20%3D%3D%3D%20Pacman.BISCUIT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23000%22%3B%0A%09%09%20%20%20%20ctx.fillRect%28%28x%20*%20blockSize%29%2C%20%28y%20*%20blockSize%29%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockSize%2C%20blockSize%29%3B%0A%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28layout%20%3D%3D%3D%20Pacman.BISCUIT%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFF%22%3B%0A%09%09%20%20%20%20%20%20%20%20ctx.fillRect%28%28x%20*%20blockSize%29%20+%20%28blockSize%20/%202.5%29%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28y%20*%20blockSize%29%20+%20%28blockSize%20/%202.5%29%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20blockSize%20/%206%2C%20blockSize%20/%206%29%3B%0A%09%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20ctx.closePath%28%29%3B%09%20%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20reset%28%29%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%22draw%22%20%20%20%20%20%20%20%20%20%3A%20draw%2C%0A%20%20%20%20%20%20%20%20%22drawBlock%22%20%20%20%20%3A%20drawBlock%2C%0A%20%20%20%20%20%20%20%20%22drawPills%22%20%20%20%20%3A%20drawPills%2C%0A%20%20%20%20%20%20%20%20%22block%22%20%20%20%20%20%20%20%20%3A%20block%2C%0A%20%20%20%20%20%20%20%20%22setBlock%22%20%20%20%20%20%3A%20setBlock%2C%0A%20%20%20%20%20%20%20%20%22reset%22%20%20%20%20%20%20%20%20%3A%20reset%2C%0A%20%20%20%20%20%20%20%20%22isWallSpace%22%20%20%3A%20isWall%2C%0A%20%20%20%20%20%20%20%20%22isFloorSpace%22%20%3A%20isFloorSpace%2C%0A%20%20%20%20%20%20%20%20%22height%22%20%20%20%20%20%20%20%3A%20height%2C%0A%20%20%20%20%20%20%20%20%22width%22%20%20%20%20%20%20%20%20%3A%20width%2C%0A%20%20%20%20%20%20%20%20%22blockSize%22%20%20%20%20%3A%20blockSize%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0APacman.Audio%20%3D%20function%28game%29%20%7B%0A%20%20%20%20%0A%20%20%20%20var%20files%20%20%20%20%20%20%20%20%20%20%3D%20%5B%5D%2C%20%0A%20%20%20%20%20%20%20%20endEvents%20%20%20%20%20%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20progressEvents%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20playing%20%20%20%20%20%20%20%20%3D%20%5B%5D%3B%0A%20%20%20%20%0A%20%20%20%20function%20load%28name%2C%20path%2C%20cb%29%20%7B%20%0A%0A%20%20%20%20%20%20%20%20var%20f%20%3D%20files%5Bname%5D%20%3D%20document.createElement%28%22audio%22%29%3B%0A%0A%20%20%20%20%20%20%20%20progressEvents%5Bname%5D%20%3D%20function%28event%29%20%7B%20progress%28event%2C%20name%2C%20cb%29%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20f.addEventListener%28%22canplaythrough%22%2C%20progressEvents%5Bname%5D%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20f.setAttribute%28%22preload%22%2C%20%22true%22%29%3B%0A%20%20%20%20%20%20%20%20f.setAttribute%28%22autobuffer%22%2C%20%22true%22%29%3B%0A%20%20%20%20%20%20%20%20f.setAttribute%28%22src%22%2C%20path%29%3B%0A%20%20%20%20%20%20%20%20f.pause%28%29%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20progress%28event%2C%20name%2C%20callback%29%20%7B%20%0A%20%20%20%20%20%20%20%20if%20%28event.loaded%20%3D%3D%3D%20event.total%20%26%26%20typeof%20callback%20%3D%3D%3D%20%22function%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20files%5Bname%5D.removeEventListener%28%22canplaythrough%22%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20progressEvents%5Bname%5D%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20disableSound%28%29%20%7B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20playing.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20files%5Bplaying%5Bi%5D%5D.pause%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20files%5Bplaying%5Bi%5D%5D.currentTime%20%3D%200%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20playing%20%3D%20%5B%5D%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20ended%28name%29%20%7B%20%0A%0A%20%20%20%20%20%20%20%20var%20i%2C%20tmp%20%3D%20%5B%5D%2C%20found%20%3D%20false%3B%0A%0A%20%20%20%20%20%20%20%20files%5Bname%5D.removeEventListener%28%22ended%22%2C%20endEvents%5Bname%5D%2C%20true%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20playing.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28%21found%20%26%26%20playing%5Bi%5D%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20found%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20tmp.push%28playing%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20playing%20%3D%20tmp%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20play%28name%29%20%7B%20%0A%20%20%20%20%20%20%20%20if%20%28%21game.soundDisabled%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20endEvents%5Bname%5D%20%3D%20function%28%29%20%7B%20ended%28name%29%3B%20%7D%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20playing.push%28name%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20files%5Bname%5D.addEventListener%28%22ended%22%2C%20endEvents%5Bname%5D%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20files%5Bname%5D.play%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20pause%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20playing.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20files%5Bplaying%5Bi%5D%5D.pause%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20resume%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20playing.length%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20files%5Bplaying%5Bi%5D%5D.play%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%22disableSound%22%20%3A%20disableSound%2C%0A%20%20%20%20%20%20%20%20%22load%22%20%20%20%20%20%20%20%20%20%3A%20load%2C%0A%20%20%20%20%20%20%20%20%22play%22%20%20%20%20%20%20%20%20%20%3A%20play%2C%0A%20%20%20%20%20%20%20%20%22pause%22%20%20%20%20%20%20%20%20%3A%20pause%2C%0A%20%20%20%20%20%20%20%20%22resume%22%20%20%20%20%20%20%20%3A%20resume%0A%20%20%20%20%7D%3B%0A%7D%3B%0A%0Avar%20PACMAN%20%3D%20%28function%20%28%29%20%7B%0A%0A%20%20%20%20var%20state%20%20%20%20%20%20%20%20%3D%20WAITING%2C%0A%20%20%20%20%20%20%20%20audio%20%20%20%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20ghosts%20%20%20%20%20%20%20%3D%20%5B%5D%2C%0A%20%20%20%20%20%20%20%20ghostSpecs%20%20%20%3D%20%5B%22%2300FFDE%22%2C%20%22%23FF0000%22%2C%20%22%23FFB8DE%22%2C%20%22%23FFB847%22%5D%2C%0A%20%20%20%20%20%20%20%20eatenCount%20%20%20%3D%200%2C%0A%20%20%20%20%20%20%20%20level%20%20%20%20%20%20%20%20%3D%200%2C%0A%20%20%20%20%20%20%20%20tick%20%20%20%20%20%20%20%20%20%3D%200%2C%0A%20%20%20%20%20%20%20%20ghostPos%2C%20userPos%2C%20%0A%20%20%20%20%20%20%20%20stateChanged%20%3D%20true%2C%0A%20%20%20%20%20%20%20%20timerStart%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20lastTime%20%20%20%20%20%3D%200%2C%0A%20%20%20%20%20%20%20%20ctx%20%20%20%20%20%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20timer%20%20%20%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20map%20%20%20%20%20%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20user%20%20%20%20%20%20%20%20%20%3D%20null%2C%0A%20%20%20%20%20%20%20%20stored%20%20%20%20%20%20%20%3D%20null%3B%0A%0A%20%20%20%20function%20getTick%28%29%20%7B%20%0A%20%20%20%20%20%20%20%20return%20tick%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20drawScore%28text%2C%20position%29%20%7B%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFFFFF%22%3B%0A%20%20%20%20%20%20%20%20ctx.font%20%20%20%20%20%20%3D%20%2212px%20BDCartoonShoutRegular%22%3B%0A%20%20%20%20%20%20%20%20ctx.fillText%28text%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28position%5B%22new%22%5D%5B%22x%22%5D%20/%2010%29%20*%20map.blockSize%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28%28position%5B%22new%22%5D%5B%22y%22%5D%20+%205%29%20/%2010%29%20*%20map.blockSize%29%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20function%20dialog%28text%29%20%7B%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFFF00%22%3B%0A%20%20%20%20%20%20%20%20ctx.font%20%20%20%20%20%20%3D%20%2218px%20Calibri%22%3B%0A%20%20%20%20%20%20%20%20var%20width%20%3D%20ctx.measureText%28text%29.width%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20x%20%20%20%20%20%3D%20%28%28map.width%20*%20map.blockSize%29%20-%20width%29%20/%202%3B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.fillText%28text%2C%20x%2C%20%28map.height%20*%2010%29%20+%208%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20soundDisabled%28%29%20%7B%0A%20%20%20%20%20%20%20%20return%20localStorage%5B%22soundDisabled%22%5D%20%3D%3D%3D%20%22true%22%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20startLevel%28%29%20%7B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20user.resetPosition%28%29%3B%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%3B%20i%20%3C%20ghosts.length%3B%20i%20+%3D%201%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20ghosts%5Bi%5D.reset%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20audio.play%28%22start%22%29%3B%0A%20%20%20%20%20%20%20%20timerStart%20%3D%20tick%3B%0A%20%20%20%20%20%20%20%20setState%28COUNTDOWN%29%3B%0A%20%20%20%20%7D%20%20%20%20%0A%0A%20%20%20%20function%20startNewGame%28%29%20%7B%0A%20%20%20%20%20%20%20%20setState%28WAITING%29%3B%0A%20%20%20%20%20%20%20%20level%20%3D%201%3B%0A%20%20%20%20%20%20%20%20user.reset%28%29%3B%0A%20%20%20%20%20%20%20%20map.reset%28%29%3B%0A%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20startLevel%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20keyDown%28e%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28e.keyCode%20%3D%3D%3D%20KEY.N%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20startNewGame%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28e.keyCode%20%3D%3D%3D%20KEY.S%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20audio.disableSound%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20localStorage%5B%22soundDisabled%22%5D%20%3D%20%21soundDisabled%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28e.keyCode%20%3D%3D%3D%20KEY.P%20%26%26%20state%20%3D%3D%3D%20PAUSE%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20audio.resume%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setState%28stored%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28e.keyCode%20%3D%3D%3D%20KEY.P%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20stored%20%3D%20state%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setState%28PAUSE%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20audio.pause%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dialog%28%22Paused%22%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28state%20%21%3D%3D%20PAUSE%29%20%7B%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20return%20user.keyDown%28e%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20true%3B%0A%20%20%20%20%7D%20%20%20%20%0A%0A%20%20%20%20function%20loseLife%28%29%20%7B%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20setState%28WAITING%29%3B%0A%20%20%20%20%20%20%20%20user.loseLife%28%29%3B%0A%20%20%20%20%20%20%20%20if%20%28user.getLives%28%29%20%3E%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20startLevel%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20setState%28nState%29%20%7B%20%0A%20%20%20%20%20%20%20%20state%20%3D%20nState%3B%0A%20%20%20%20%20%20%20%20stateChanged%20%3D%20true%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20collided%28user%2C%20ghost%29%20%7B%0A%20%20%20%20%20%20%20%20return%20%28Math.sqrt%28Math.pow%28ghost.x%20-%20user.x%2C%202%29%20+%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Math.pow%28ghost.y%20-%20user.y%2C%202%29%29%29%20%3C%2010%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20drawFooter%28%29%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20topLeft%20%20%3D%20%28map.height%20*%20map.blockSize%29%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20textBase%20%3D%20topLeft%20+%2017%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23000000%22%3B%0A%20%20%20%20%20%20%20%20ctx.fillRect%280%2C%20topLeft%2C%20%28map.width%20*%20map.blockSize%29%2C%2030%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFFF00%22%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28var%20i%20%3D%200%2C%20len%20%3D%20user.getLives%28%29%3B%20i%20%3C%20len%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFFF00%22%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.beginPath%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.moveTo%28150%20+%20%2825%20*%20i%29%20+%20map.blockSize%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28topLeft+1%29%20+%20map.blockSize%20/%202%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.arc%28150%20+%20%2825%20*%20i%29%20+%20map.blockSize%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28topLeft+1%29%20+%20map.blockSize%20/%202%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.blockSize%20/%202%2C%20Math.PI%20*%200.25%2C%20Math.PI%20*%201.75%2C%20false%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ctx.fill%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%21soundDisabled%28%29%20%3F%20%22%2300FF00%22%20%3A%20%22%23FF0000%22%3B%0A%20%20%20%20%20%20%20%20ctx.font%20%3D%20%22bold%2016px%20sans-serif%22%3B%0A%20%20%20%20%20%20%20%20//ctx.fillText%28%22%u266A%22%2C%2010%2C%20textBase%29%3B%0A%20%20%20%20%20%20%20%20ctx.fillText%28%22s%22%2C%2010%2C%20textBase%29%3B%0A%0A%20%20%20%20%20%20%20%20ctx.fillStyle%20%3D%20%22%23FFFF00%22%3B%0A%20%20%20%20%20%20%20%20ctx.font%20%20%20%20%20%20%3D%20%2214px%20Calibri%22%3B%0A%20%20%20%20%20%20%20%20ctx.fillText%28%22Score%3A%20%22%20+%20user.theScore%28%29%2C%2030%2C%20textBase%29%3B%0A%20%20%20%20%20%20%20%20ctx.fillText%28%22Level%3A%20%22%20+%20level%2C%20260%2C%20textBase%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20redrawBlock%28pos%29%20%7B%0A%20%20%20%20%20%20%20%20map.drawBlock%28Math.floor%28pos.y/10%29%2C%20Math.floor%28pos.x/10%29%2C%20ctx%29%3B%0A%20%20%20%20%20%20%20%20map.drawBlock%28Math.ceil%28pos.y/10%29%2C%20Math.ceil%28pos.x/10%29%2C%20ctx%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20mainDraw%28%29%20%7B%20%0A%0A%20%20%20%20%20%20%20%20var%20diff%2C%20u%2C%20i%2C%20len%2C%20nScore%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20ghostPos%20%3D%20%5B%5D%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20len%20%3D%20ghosts.length%3B%20i%20%3C%20len%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ghostPos.push%28ghosts%5Bi%5D.move%28ctx%29%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20u%20%3D%20user.move%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20len%20%3D%20ghosts.length%3B%20i%20%3C%20len%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20redrawBlock%28ghostPos%5Bi%5D.old%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20redrawBlock%28u.old%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20len%20%3D%20ghosts.length%3B%20i%20%3C%20len%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ghosts%5Bi%5D.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20user.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20userPos%20%3D%20u%5B%22new%22%5D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20len%20%3D%20ghosts.length%3B%20i%20%3C%20len%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28collided%28userPos%2C%20ghostPos%5Bi%5D%5B%22new%22%5D%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28ghosts%5Bi%5D.isVunerable%28%29%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20audio.play%28%22eatghost%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ghosts%5Bi%5D.eat%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20eatenCount%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nScore%20%3D%20eatenCount%20*%2050%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20drawScore%28nScore%2C%20ghostPos%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20user.addScore%28nScore%29%3B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setState%28EATEN_PAUSE%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timerStart%20%3D%20tick%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20if%20%28ghosts%5Bi%5D.isDangerous%28%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20audio.play%28%22die%22%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setState%28DYING%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20timerStart%20%3D%20tick%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20mainLoop%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20var%20diff%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28state%20%21%3D%3D%20PAUSE%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20++tick%3B%0A%20%20%20%20%20%20%20%20%7D%0A%0A%20%20%20%20%20%20%20%20map.drawPills%28ctx%29%3B%0A%0A%20%20%20%20%20%20%20%20if%20%28state%20%3D%3D%3D%20PLAYING%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20mainDraw%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28state%20%3D%3D%3D%20WAITING%20%26%26%20stateChanged%29%20%7B%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20stateChanged%20%3D%20false%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20dialog%28%22Press%20N%20to%20start%20a%20New%20game%22%29%3B%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28state%20%3D%3D%3D%20EATEN_PAUSE%20%26%26%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%28tick%20-%20timerStart%29%20%3E%20%28Pacman.FPS%20/%203%29%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20setState%28PLAYING%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28state%20%3D%3D%3D%20DYING%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28tick%20-%20timerStart%20%3E%20%28Pacman.FPS%20*%202%29%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20loseLife%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20redrawBlock%28userPos%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20len%20%3D%20ghosts.length%3B%20i%20%3C%20len%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20redrawBlock%28ghostPos%5Bi%5D.old%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20ghostPos.push%28ghosts%5Bi%5D.draw%28ctx%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20user.drawDead%28ctx%2C%20%28tick%20-%20timerStart%29%20/%20%28Pacman.FPS%20*%202%29%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20else%20if%20%28state%20%3D%3D%3D%20COUNTDOWN%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20diff%20%3D%205%20+%20Math.floor%28%28timerStart%20-%20tick%29%20/%20Pacman.FPS%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20%28diff%20%3D%3D%3D%200%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20setState%28PLAYING%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20%28diff%20%21%3D%3D%20lastTime%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20lastTime%20%3D%20diff%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20dialog%28%22Starting%20in%3A%20%22%20+%20diff%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%20%0A%0A%20%20%20%20%20%20%20%20drawFooter%28%29%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20function%20eatenPill%28%29%20%7B%0A%20%20%20%20%20%20%20%20audio.play%28%22eatpill%22%29%3B%0A%20%20%20%20%20%20%20%20timerStart%20%3D%20tick%3B%0A%20%20%20%20%20%20%20%20eatenCount%20%3D%200%3B%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%3B%20i%20%3C%20ghosts.length%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ghosts%5Bi%5D.makeEatable%28ctx%29%3B%0A%20%20%20%20%20%20%20%20%7D%20%20%20%20%20%20%20%20%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20completedLevel%28%29%20%7B%0A%20%20%20%20%20%20%20%20setState%28WAITING%29%3B%0A%20%20%20%20%20%20%20%20level%20+%3D%201%3B%0A%20%20%20%20%20%20%20%20map.reset%28%29%3B%0A%20%20%20%20%20%20%20%20user.newLevel%28%29%3B%0A%20%20%20%20%20%20%20%20startLevel%28%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20keyPress%28e%29%20%7B%20%0A%20%20%20%20%20%20%20%20if%20%28state%20%21%3D%3D%20WAITING%20%26%26%20state%20%21%3D%3D%20PAUSE%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20e.preventDefault%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20e.stopPropagation%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20function%20init%28wrapper%2C%20root%29%20%7B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20var%20i%2C%20len%2C%20ghost%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockSize%20%3D%20wrapper.offsetWidth%20/%2019%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20canvas%20%20%20%20%3D%20document.createElement%28%22canvas%22%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20canvas.setAttribute%28%22width%22%2C%20%28blockSize%20*%2019%29%20+%20%22px%22%29%3B%0A%20%20%20%20%20%20%20%20canvas.setAttribute%28%22height%22%2C%20%28blockSize%20*%2022%29%20+%2030%20+%20%22px%22%29%3B%0A%0A%20%20%20%20%20%20%20%20wrapper.appendChild%28canvas%29%3B%0A%0A%20%20%20%20%20%20%20%20ctx%20%20%3D%20canvas.getContext%28%272d%27%29%3B%0A%0A%20%20%20%20%20%20%20%20audio%20%3D%20new%20Pacman.Audio%28%7B%22soundDisabled%22%3AsoundDisabled%7D%29%3B%0A%20%20%20%20%20%20%20%20map%20%20%20%3D%20new%20Pacman.Map%28blockSize%29%3B%0A%20%20%20%20%20%20%20%20user%20%20%3D%20new%20Pacman.User%28%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22completedLevel%22%20%3A%20completedLevel%2C%20%0A%20%20%20%20%20%20%20%20%20%20%20%20%22eatenPill%22%20%20%20%20%20%20%3A%20eatenPill%20%0A%20%20%20%20%20%20%20%20%7D%2C%20map%29%3B%0A%0A%20%20%20%20%20%20%20%20for%20%28i%20%3D%200%2C%20len%20%3D%20ghostSpecs.length%3B%20i%20%3C%20len%3B%20i%20+%3D%201%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20ghost%20%3D%20new%20Pacman.Ghost%28%7B%22getTick%22%3AgetTick%7D%2C%20map%2C%20ghostSpecs%5Bi%5D%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20ghosts.push%28ghost%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20map.draw%28ctx%29%3B%0A%20%20%20%20%20%20%20%20dialog%28%22Loading%20...%22%29%3B%0A%0A%20%20%20%20%20%20%20%20var%20extension%20%3D%20Modernizr.audio.ogg%20%3F%20%27ogg%27%20%3A%20%27mp3%27%3B%0A%0A%20%20%20%20%20%20%20%20var%20audio_files%20%3D%20%5B%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%22start%22%2C%20root%20+%20%22audio/opening_song.%22%20+%20extension%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%22die%22%2C%20root%20+%20%22audio/die.%22%20+%20extension%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%22eatghost%22%2C%20root%20+%20%22audio/eatghost.%22%20+%20extension%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%22eatpill%22%2C%20root%20+%20%22audio/eatpill.%22%20+%20extension%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%22eating%22%2C%20root%20+%20%22audio/eating.short.%22%20+%20extension%5D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%5B%22eating2%22%2C%20root%20+%20%22audio/eating.short.%22%20+%20extension%5D%0A%20%20%20%20%20%20%20%20%5D%3B%0A%0A%20%20%20%20%20%20%20%20load%28audio_files%2C%20function%28%29%20%7B%20loaded%28%29%3B%20%7D%29%3B%0A%20%20%20%20%7D%3B%0A%0A%20%20%20%20function%20load%28arr%2C%20callback%29%20%7B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20if%20%28arr.length%20%3D%3D%3D%200%29%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20callback%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%20%0A%20%20%20%20%20%20%20%20%20%20%20%20var%20x%20%3D%20arr.pop%28%29%3B%0A%20%20%20%20%20%20%20%20%20%20%20%20audio.load%28x%5B0%5D%2C%20x%5B1%5D%2C%20function%28%29%20%7B%20load%28arr%2C%20callback%29%3B%20%7D%29%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20function%20loaded%28%29%20%7B%0A%0A%20%20%20%20%20%20%20%20dialog%28%22Press%20N%20to%20Start%22%29%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20document.addEventListener%28%22keydown%22%2C%20keyDown%2C%20true%29%3B%0A%20%20%20%20%20%20%20%20document.addEventListener%28%22keypress%22%2C%20keyPress%2C%20true%29%3B%20%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20timer%20%3D%20window.setInterval%28mainLoop%2C%201000%20/%20Pacman.FPS%29%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20%22init%22%20%3A%20init%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%7D%28%29%29%3B%0A%0A/*%20Human%20readable%20keyCode%20index%20*/%0Avar%20KEY%20%3D%20%7B%27BACKSPACE%27%3A%208%2C%20%27TAB%27%3A%209%2C%20%27NUM_PAD_CLEAR%27%3A%2012%2C%20%27ENTER%27%3A%2013%2C%20%27SHIFT%27%3A%2016%2C%20%27CTRL%27%3A%2017%2C%20%27ALT%27%3A%2018%2C%20%27PAUSE%27%3A%2019%2C%20%27CAPS_LOCK%27%3A%2020%2C%20%27ESCAPE%27%3A%2027%2C%20%27SPACEBAR%27%3A%2032%2C%20%27PAGE_UP%27%3A%2033%2C%20%27PAGE_DOWN%27%3A%2034%2C%20%27END%27%3A%2035%2C%20%27HOME%27%3A%2036%2C%20%27ARROW_LEFT%27%3A%2037%2C%20%27ARROW_UP%27%3A%2038%2C%20%27ARROW_RIGHT%27%3A%2039%2C%20%27ARROW_DOWN%27%3A%2040%2C%20%27PRINT_SCREEN%27%3A%2044%2C%20%27INSERT%27%3A%2045%2C%20%27DELETE%27%3A%2046%2C%20%27SEMICOLON%27%3A%2059%2C%20%27WINDOWS_LEFT%27%3A%2091%2C%20%27WINDOWS_RIGHT%27%3A%2092%2C%20%27SELECT%27%3A%2093%2C%20%27NUM_PAD_ASTERISK%27%3A%20106%2C%20%27NUM_PAD_PLUS_SIGN%27%3A%20107%2C%20%27NUM_PAD_HYPHEN-MINUS%27%3A%20109%2C%20%27NUM_PAD_FULL_STOP%27%3A%20110%2C%20%27NUM_PAD_SOLIDUS%27%3A%20111%2C%20%27NUM_LOCK%27%3A%20144%2C%20%27SCROLL_LOCK%27%3A%20145%2C%20%27SEMICOLON%27%3A%20186%2C%20%27EQUALS_SIGN%27%3A%20187%2C%20%27COMMA%27%3A%20188%2C%20%27HYPHEN-MINUS%27%3A%20189%2C%20%27FULL_STOP%27%3A%20190%2C%20%27SOLIDUS%27%3A%20191%2C%20%27GRAVE_ACCENT%27%3A%20192%2C%20%27LEFT_SQUARE_BRACKET%27%3A%20219%2C%20%27REVERSE_SOLIDUS%27%3A%20220%2C%20%27RIGHT_SQUARE_BRACKET%27%3A%20221%2C%20%27APOSTROPHE%27%3A%20222%7D%3B%0A%0A%28function%20%28%29%20%7B%0A%09/*%200%20-%209%20*/%0A%09for%20%28var%20i%20%3D%2048%3B%20i%20%3C%3D%2057%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20KEY%5B%27%27%20+%20%28i%20-%2048%29%5D%20%3D%20i%3B%0A%09%7D%0A%09/*%20A%20-%20Z%20*/%0A%09for%20%28i%20%3D%2065%3B%20i%20%3C%3D%2090%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20KEY%5B%27%27%20+%20String.fromCharCode%28i%29%5D%20%3D%20i%3B%0A%09%7D%0A%09/*%20NUM_PAD_0%20-%20NUM_PAD_9%20*/%0A%09for%20%28i%20%3D%2096%3B%20i%20%3C%3D%20105%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20KEY%5B%27NUM_PAD_%27%20+%20%28i%20-%2096%29%5D%20%3D%20i%3B%0A%09%7D%0A%09/*%20F1%20-%20F12%20*/%0A%09for%20%28i%20%3D%20112%3B%20i%20%3C%3D%20123%3B%20i++%29%20%7B%0A%20%20%20%20%20%20%20%20KEY%5B%27F%27%20+%20%28i%20-%20112%20+%201%29%5D%20%3D%20i%3B%0A%09%7D%0A%7D%29%28%29%3B%0A%0APacman.WALL%20%20%20%20%3D%200%3B%0APacman.BISCUIT%20%3D%201%3B%0APacman.EMPTY%20%20%20%3D%202%3B%0APacman.BLOCK%20%20%20%3D%203%3B%0APacman.PILL%20%20%20%20%3D%204%3B%0A%0APacman.MAP%20%3D%20%5B%0A%20%20%20%20%5B0%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%5D%2C%0A%09%5B0%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%5D%2C%0A%09%5B0%2C%204%2C%200%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%200%2C%204%2C%200%5D%2C%0A%09%5B0%2C%201%2C%200%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%200%2C%201%2C%200%5D%2C%0A%09%5B0%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%5D%2C%0A%09%5B0%2C%201%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%201%2C%200%5D%2C%0A%09%5B0%2C%201%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%201%2C%200%5D%2C%0A%09%5B0%2C%200%2C%200%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%5D%2C%0A%09%5B2%2C%202%2C%202%2C%200%2C%201%2C%200%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%2C%201%2C%200%2C%202%2C%202%2C%202%5D%2C%0A%09%5B0%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%203%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%5D%2C%0A%09%5B2%2C%202%2C%202%2C%202%2C%201%2C%201%2C%201%2C%200%2C%203%2C%203%2C%203%2C%200%2C%201%2C%201%2C%201%2C%202%2C%202%2C%202%2C%202%5D%2C%0A%09%5B0%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%5D%2C%0A%09%5B2%2C%202%2C%202%2C%200%2C%201%2C%200%2C%201%2C%201%2C%201%2C%202%2C%201%2C%201%2C%201%2C%200%2C%201%2C%200%2C%202%2C%202%2C%202%5D%2C%0A%09%5B0%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%5D%2C%0A%09%5B0%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%5D%2C%0A%09%5B0%2C%201%2C%200%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%201%2C%200%2C%200%2C%201%2C%200%5D%2C%0A%09%5B0%2C%204%2C%201%2C%200%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%2C%201%2C%204%2C%200%5D%2C%0A%09%5B0%2C%200%2C%201%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%5D%2C%0A%09%5B0%2C%201%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%200%2C%201%2C%201%2C%201%2C%201%2C%200%5D%2C%0A%09%5B0%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%2C%201%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%201%2C%200%5D%2C%0A%09%5B0%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%201%2C%200%5D%2C%0A%09%5B0%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%2C%200%5D%0A%5D%3B%0A%0APacman.WALLS%20%3D%20%5B%0A%20%20%20%20%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B0%2C%209.5%5D%7D%2C%20%7B%22line%22%3A%20%5B3%2C%209.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B3.5%2C%209.5%2C%203.5%2C%209%5D%7D%2C%20%7B%22line%22%3A%20%5B3.5%2C%208%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B3.5%2C%207.5%2C%203%2C%207.5%5D%7D%2C%20%7B%22line%22%3A%20%5B1%2C%207.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B0.5%2C%207.5%2C%200.5%2C%207%5D%7D%2C%20%7B%22line%22%3A%20%5B0.5%2C%201%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B0.5%2C%200.5%2C%201%2C%200.5%5D%7D%2C%20%7B%22line%22%3A%20%5B9%2C%200.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B9.5%2C%200.5%2C%209.5%2C%201%5D%7D%2C%20%7B%22line%22%3A%20%5B9.5%2C%203.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B9.5%2C%201%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B9.5%2C%200.5%2C%2010%2C%200.5%5D%7D%2C%20%7B%22line%22%3A%20%5B18%2C%200.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B18.5%2C%200.5%2C%2018.5%2C%201%5D%7D%2C%20%7B%22line%22%3A%20%5B18.5%2C%207%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B18.5%2C%207.5%2C%2018%2C%207.5%5D%7D%2C%20%7B%22line%22%3A%20%5B16%2C%207.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B15.5%2C%207.5%2C%2015.5%2C%208%5D%7D%2C%20%7B%22line%22%3A%20%5B15.5%2C%209%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B15.5%2C%209.5%2C%2016%2C%209.5%5D%7D%2C%20%7B%22line%22%3A%20%5B19%2C%209.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B2.5%2C%205.5%5D%7D%2C%20%7B%22line%22%3A%20%5B3.5%2C%205.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B3%2C%202.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B3.5%2C%202.5%2C%203.5%2C%203%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B3.5%2C%203.5%2C%203%2C%203.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B2.5%2C%203.5%2C%202.5%2C%203%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B2.5%2C%202.5%2C%203%2C%202.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B15.5%2C%205.5%5D%7D%2C%20%7B%22line%22%3A%20%5B16.5%2C%205.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B16%2C%202.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B16.5%2C%202.5%2C%2016.5%2C%203%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B16.5%2C%203.5%2C%2016%2C%203.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B15.5%2C%203.5%2C%2015.5%2C%203%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B15.5%2C%202.5%2C%2016%2C%202.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B6%2C%202.5%5D%7D%2C%20%7B%22line%22%3A%20%5B7%2C%202.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B7.5%2C%202.5%2C%207.5%2C%203%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B7.5%2C%203.5%2C%207%2C%203.5%5D%7D%2C%20%7B%22line%22%3A%20%5B6%2C%203.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B5.5%2C%203.5%2C%205.5%2C%203%5D%7D%2C%20%7B%22curve%22%3A%20%5B5.5%2C%202.5%2C%206%2C%202.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B12%2C%202.5%5D%7D%2C%20%7B%22line%22%3A%20%5B13%2C%202.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B13.5%2C%202.5%2C%2013.5%2C%203%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B13.5%2C%203.5%2C%2013%2C%203.5%5D%7D%2C%20%7B%22line%22%3A%20%5B12%2C%203.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B11.5%2C%203.5%2C%2011.5%2C%203%5D%7D%2C%20%7B%22curve%22%3A%20%5B11.5%2C%202.5%2C%2012%2C%202.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B7.5%2C%205.5%5D%7D%2C%20%7B%22line%22%3A%20%5B9%2C%205.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B9.5%2C%205.5%2C%209.5%2C%206%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B9.5%2C%207.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B9.5%2C%206%5D%7D%2C%20%7B%22curve%22%3A%20%5B9.5%2C%205.5%2C%2010.5%2C%205.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B11.5%2C%205.5%5D%7D%5D%2C%0A%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B5.5%2C%205.5%5D%7D%2C%20%7B%22line%22%3A%20%5B5.5%2C%207%5D%7D%2C%20%7B%22curve%22%3A%20%5B5.5%2C%207.5%2C%206%2C%207.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B7.5%2C%207.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B6%2C%207.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B5.5%2C%207.5%2C%205.5%2C%208%5D%7D%2C%20%7B%22line%22%3A%20%5B5.5%2C%209.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B13.5%2C%205.5%5D%7D%2C%20%7B%22line%22%3A%20%5B13.5%2C%207%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B13.5%2C%207.5%2C%2013%2C%207.5%5D%7D%2C%20%7B%22line%22%3A%20%5B11.5%2C%207.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B13%2C%207.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B13.5%2C%207.5%2C%2013.5%2C%208%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B13.5%2C%209.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B0%2C%2011.5%5D%7D%2C%20%7B%22line%22%3A%20%5B3%2C%2011.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B3.5%2C%2011.5%2C%203.5%2C%2012%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B3.5%2C%2013%5D%7D%2C%20%7B%22curve%22%3A%20%5B3.5%2C%2013.5%2C%203%2C%2013.5%5D%7D%2C%20%7B%22line%22%3A%20%5B1%2C%2013.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B0.5%2C%2013.5%2C%200.5%2C%2014%5D%7D%2C%20%7B%22line%22%3A%20%5B0.5%2C%2017%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B0.5%2C%2017.5%2C%201%2C%2017.5%5D%7D%2C%20%7B%22line%22%3A%20%5B1.5%2C%2017.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B1%2C%2017.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B0.5%2C%2017.5%2C%200.5%2C%2018%5D%7D%2C%20%7B%22line%22%3A%20%5B0.5%2C%2021%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B0.5%2C%2021.5%2C%201%2C%2021.5%5D%7D%2C%20%7B%22line%22%3A%20%5B18%2C%2021.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B18.5%2C%2021.5%2C%2018.5%2C%2021%5D%7D%2C%20%7B%22line%22%3A%20%5B18.5%2C%2018%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B18.5%2C%2017.5%2C%2018%2C%2017.5%5D%7D%2C%20%7B%22line%22%3A%20%5B17.5%2C%2017.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B18%2C%2017.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B18.5%2C%2017.5%2C%2018.5%2C%2017%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B18.5%2C%2014%5D%7D%2C%20%7B%22curve%22%3A%20%5B18.5%2C%2013.5%2C%2018%2C%2013.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B16%2C%2013.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B15.5%2C%2013.5%2C%2015.5%2C%2013%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B15.5%2C%2012%5D%7D%2C%20%7B%22curve%22%3A%20%5B15.5%2C%2011.5%2C%2016%2C%2011.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B19%2C%2011.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B5.5%2C%2011.5%5D%7D%2C%20%7B%22line%22%3A%20%5B5.5%2C%2013.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B13.5%2C%2011.5%5D%7D%2C%20%7B%22line%22%3A%20%5B13.5%2C%2013.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B2.5%2C%2015.5%5D%7D%2C%20%7B%22line%22%3A%20%5B3%2C%2015.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B3.5%2C%2015.5%2C%203.5%2C%2016%5D%7D%2C%20%7B%22line%22%3A%20%5B3.5%2C%2017.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B16.5%2C%2015.5%5D%7D%2C%20%7B%22line%22%3A%20%5B16%2C%2015.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B15.5%2C%2015.5%2C%2015.5%2C%2016%5D%7D%2C%20%7B%22line%22%3A%20%5B15.5%2C%2017.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B5.5%2C%2015.5%5D%7D%2C%20%7B%22line%22%3A%20%5B7.5%2C%2015.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B11.5%2C%2015.5%5D%7D%2C%20%7B%22line%22%3A%20%5B13.5%2C%2015.5%5D%7D%5D%2C%0A%20%20%20%20%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B2.5%2C%2019.5%5D%7D%2C%20%7B%22line%22%3A%20%5B5%2C%2019.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B5.5%2C%2019.5%2C%205.5%2C%2019%5D%7D%2C%20%7B%22line%22%3A%20%5B5.5%2C%2017.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B5.5%2C%2019%5D%7D%2C%20%7B%22curve%22%3A%20%5B5.5%2C%2019.5%2C%206%2C%2019.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B7.5%2C%2019.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B11.5%2C%2019.5%5D%7D%2C%20%7B%22line%22%3A%20%5B13%2C%2019.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B13.5%2C%2019.5%2C%2013.5%2C%2019%5D%7D%2C%20%7B%22line%22%3A%20%5B13.5%2C%2017.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B13.5%2C%2019%5D%7D%2C%20%7B%22curve%22%3A%20%5B13.5%2C%2019.5%2C%2014%2C%2019.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B16.5%2C%2019.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B7.5%2C%2013.5%5D%7D%2C%20%7B%22line%22%3A%20%5B9%2C%2013.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B9.5%2C%2013.5%2C%209.5%2C%2014%5D%7D%2C%20%7B%22line%22%3A%20%5B9.5%2C%2015.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B9.5%2C%2014%5D%7D%2C%20%7B%22curve%22%3A%20%5B9.5%2C%2013.5%2C%2010%2C%2013.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B11.5%2C%2013.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B7.5%2C%2017.5%5D%7D%2C%20%7B%22line%22%3A%20%5B9%2C%2017.5%5D%7D%2C%0A%20%20%20%20%20%7B%22curve%22%3A%20%5B9.5%2C%2017.5%2C%209.5%2C%2018%5D%7D%2C%20%7B%22line%22%3A%20%5B9.5%2C%2019.5%5D%7D%5D%2C%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B9.5%2C%2018%5D%7D%2C%20%7B%22curve%22%3A%20%5B9.5%2C%2017.5%2C%2010%2C%2017.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B11.5%2C%2017.5%5D%7D%5D%2C%0A%0A%20%20%20%20%5B%7B%22move%22%3A%20%5B8.5%2C%209.5%5D%7D%2C%20%7B%22line%22%3A%20%5B8%2C%209.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B7.5%2C%209.5%2C%207.5%2C%2010%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B7.5%2C%2011%5D%7D%2C%20%7B%22curve%22%3A%20%5B7.5%2C%2011.5%2C%208%2C%2011.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B11%2C%2011.5%5D%7D%2C%20%7B%22curve%22%3A%20%5B11.5%2C%2011.5%2C%2011.5%2C%2011%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B11.5%2C%2010%5D%7D%2C%20%7B%22curve%22%3A%20%5B11.5%2C%209.5%2C%2011%2C%209.5%5D%7D%2C%0A%20%20%20%20%20%7B%22line%22%3A%20%5B10.5%2C%209.5%5D%7D%5D%0A%5D%3B%0A%0AObject.prototype.clone%20%3D%20function%20%28%29%20%7B%0A%20%20%20%20var%20i%2C%20newObj%20%3D%20%28this%20instanceof%20Array%29%20%3F%20%5B%5D%20%3A%20%7B%7D%3B%0A%20%20%20%20for%20%28i%20in%20this%29%20%7B%0A%20%20%20%20%20%20%20%20if%20%28i%20%3D%3D%3D%20%27clone%27%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20continue%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20if%20%28this%5Bi%5D%20%26%26%20typeof%20this%5Bi%5D%20%3D%3D%3D%20%22object%22%29%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newObj%5Bi%5D%20%3D%20this%5Bi%5D.clone%28%29%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20newObj%5Bi%5D%20%3D%20this%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20return%20newObj%3B%0A%7D%3B%0A%0A%24%28function%28%29%7B%0A%20%20var%20el%20%3D%20document.getElementById%28%22pacman%22%29%3B%0A%0A%20%20if%20%28Modernizr.canvas%20%26%26%20Modernizr.localstorage%20%26%26%20%0A%20%20%20%20%20%20Modernizr.audio%20%26%26%20%28Modernizr.audio.ogg%20%7C%7C%20Modernizr.audio.mp3%29%29%20%7B%0A%20%20%20%20window.setTimeout%28function%20%28%29%20%7B%20PACMAN.init%28el%2C%20%22https%3A//raw.githubusercontent.com/daleharvey/pacman/master/%22%29%3B%20%7D%2C%200%29%3B%0A%20%20%7D%20else%20%7B%20%0A%20%20%20%20el.innerHTML%20%3D%20%22Sorry%2C%20needs%20a%20decent%20browser%3Cbr%20/%3E%3Csmall%3E%22%20+%20%0A%20%20%20%20%20%20%22%28firefox%203.6+%2C%20Chrome%204+%2C%20Opera%2010+%20and%20Safari%204+%29%3C/small%3E%22%3B%0A%20%20%7D%0A%7D%29%3B%0A%0A%0A%09%3C/script%3E%0A%3C/body%3E%0A%3C/htm'))
    </script>
    